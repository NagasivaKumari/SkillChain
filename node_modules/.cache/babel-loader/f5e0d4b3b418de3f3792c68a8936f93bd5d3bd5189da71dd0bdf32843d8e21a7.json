{"ast":null,"code":"import base32 from 'hi-base32';\nimport { boxReferencesToEncodingData } from './boxStorage.js';\nimport { Address } from './encoding/address.js';\nimport * as encoding from './encoding/encoding.js';\nimport { AddressSchema, Uint64Schema, ByteArraySchema, FixedLengthByteArraySchema, StringSchema, ArraySchema, NamedMapSchema, BooleanSchema, OptionalSchema, allOmitEmpty } from './encoding/schema/index.js';\nimport * as nacl from './nacl/naclWrappers.js';\nimport { isOnApplicationComplete, TransactionType, isTransactionType } from './types/transactions/base.js';\nimport { StateProof, StateProofMessage } from './stateproof.js';\nimport { Heartbeat } from './heartbeat.js';\nimport * as utils from './utils/utils.js';\nconst ALGORAND_TRANSACTION_LENGTH = 52;\nconst ALGORAND_TRANSACTION_LEASE_LENGTH = 32;\nconst NUM_ADDL_BYTES_AFTER_SIGNING = 75; // NUM_ADDL_BYTES_AFTER_SIGNING is the number of bytes added to a txn after signing it\nconst ASSET_METADATA_HASH_LENGTH = 32;\nconst KEYREG_VOTE_KEY_LENGTH = 32;\nconst KEYREG_SELECTION_KEY_LENGTH = 32;\nconst KEYREG_STATE_PROOF_KEY_LENGTH = 64;\nconst ALGORAND_TRANSACTION_GROUP_LENGTH = 32;\nfunction uint8ArrayIsEmpty(input) {\n  return input.every(value => value === 0);\n}\nfunction getKeyregKey(input, inputName, length) {\n  if (input == null) {\n    return undefined;\n  }\n  let inputBytes;\n  if (input instanceof Uint8Array) {\n    inputBytes = input;\n  }\n  if (inputBytes == null || inputBytes.byteLength !== length) {\n    throw Error(`${inputName} must be a ${length} byte Uint8Array`);\n  }\n  return inputBytes;\n}\nfunction ensureAddress(input) {\n  if (input == null) {\n    throw new Error('Address must not be null or undefined');\n  }\n  if (typeof input === 'string') {\n    return Address.fromString(input);\n  }\n  if (input instanceof Address) {\n    return input;\n  }\n  throw new Error(`Not an address: ${input}`);\n}\nfunction optionalAddress(input) {\n  if (input == null) {\n    return undefined;\n  }\n  let addr;\n  if (input instanceof Address) {\n    addr = input;\n  } else if (typeof input === 'string') {\n    addr = Address.fromString(input);\n  } else {\n    throw new Error(`Not an address: ${input}`);\n  }\n  if (uint8ArrayIsEmpty(addr.publicKey)) {\n    // If it's the zero address, throw an error so that the user won't be surprised that this gets dropped\n    throw new Error('Invalid use of the zero address. To omit this value, pass in undefined');\n  }\n  return addr;\n}\nfunction optionalUint8Array(input) {\n  if (typeof input === 'undefined') {\n    return undefined;\n  }\n  if (input instanceof Uint8Array) {\n    return input;\n  }\n  throw new Error(`Not a Uint8Array: ${input}`);\n}\nfunction ensureUint8Array(input) {\n  if (input instanceof Uint8Array) {\n    return input;\n  }\n  throw new Error(`Not a Uint8Array: ${input}`);\n}\nfunction optionalUint64(input) {\n  if (typeof input === 'undefined') {\n    return undefined;\n  }\n  return utils.ensureUint64(input);\n}\nfunction ensureBoolean(input) {\n  if (input === true || input === false) {\n    return input;\n  }\n  throw new Error(`Not a boolean: ${input}`);\n}\nfunction ensureArray(input) {\n  if (Array.isArray(input)) {\n    return input.slice();\n  }\n  throw new Error(`Not an array: ${input}`);\n}\nfunction optionalFixedLengthByteArray(input, length, name) {\n  const bytes = optionalUint8Array(input);\n  if (typeof bytes === 'undefined') {\n    return undefined;\n  }\n  if (bytes.byteLength !== length) {\n    throw new Error(`${name} must be ${length} bytes long, was ${bytes.byteLength}`);\n  }\n  if (uint8ArrayIsEmpty(bytes)) {\n    // if contains all 0s, omit it\n    return undefined;\n  }\n  return bytes;\n}\nfunction ensureBoxReference(input) {\n  if (input != null && typeof input === 'object') {\n    const {\n      appIndex,\n      name\n    } = input;\n    return {\n      appIndex: utils.ensureUint64(appIndex),\n      name: ensureUint8Array(name)\n    };\n  }\n  throw new Error(`Not a box reference: ${input}`);\n}\nconst TX_TAG = new TextEncoder().encode('TX');\n/**\n * Transaction enables construction of Algorand transactions\n * */\nexport class Transaction {\n  constructor(params) {\n    if (!isTransactionType(params.type)) {\n      throw new Error(`Invalid transaction type: ${params.type}`);\n    }\n    // Common fields\n    this.type = params.type; // verified above\n    this.sender = ensureAddress(params.sender);\n    this.note = ensureUint8Array(params.note ?? new Uint8Array());\n    this.lease = optionalFixedLengthByteArray(params.lease, ALGORAND_TRANSACTION_LEASE_LENGTH, 'lease');\n    this.rekeyTo = optionalAddress(params.rekeyTo);\n    // Group\n    this.group = undefined;\n    // Suggested params fields\n    this.firstValid = utils.ensureUint64(params.suggestedParams.firstValid);\n    this.lastValid = utils.ensureUint64(params.suggestedParams.lastValid);\n    if (params.suggestedParams.genesisID) {\n      if (typeof params.suggestedParams.genesisID !== 'string') {\n        throw new Error('Genesis ID must be a string if present');\n      }\n      this.genesisID = params.suggestedParams.genesisID;\n    }\n    this.genesisHash = optionalUint8Array(params.suggestedParams.genesisHash);\n    // Fee is handled at the end\n    const fieldsPresent = [];\n    if (params.paymentParams) fieldsPresent.push(TransactionType.pay);\n    if (params.keyregParams) fieldsPresent.push(TransactionType.keyreg);\n    if (params.assetConfigParams) fieldsPresent.push(TransactionType.acfg);\n    if (params.assetTransferParams) fieldsPresent.push(TransactionType.axfer);\n    if (params.assetFreezeParams) fieldsPresent.push(TransactionType.afrz);\n    if (params.appCallParams) fieldsPresent.push(TransactionType.appl);\n    if (params.stateProofParams) fieldsPresent.push(TransactionType.stpf);\n    if (params.heartbeatParams) fieldsPresent.push(TransactionType.hb);\n    if (fieldsPresent.length !== 1) {\n      throw new Error(`Transaction has wrong number of type fields present (${fieldsPresent.length}): ${fieldsPresent}`);\n    }\n    if (this.type !== fieldsPresent[0]) {\n      throw new Error(`Transaction has type ${this.type} but fields present for ${fieldsPresent[0]}`);\n    }\n    if (params.paymentParams) {\n      this.payment = {\n        receiver: ensureAddress(params.paymentParams.receiver),\n        amount: utils.ensureUint64(params.paymentParams.amount),\n        closeRemainderTo: optionalAddress(params.paymentParams.closeRemainderTo)\n      };\n    }\n    if (params.keyregParams) {\n      this.keyreg = {\n        voteKey: getKeyregKey(params.keyregParams.voteKey, 'voteKey', KEYREG_VOTE_KEY_LENGTH),\n        selectionKey: getKeyregKey(params.keyregParams.selectionKey, 'selectionKey', KEYREG_SELECTION_KEY_LENGTH),\n        stateProofKey: getKeyregKey(params.keyregParams.stateProofKey, 'stateProofKey', KEYREG_STATE_PROOF_KEY_LENGTH),\n        voteFirst: optionalUint64(params.keyregParams.voteFirst),\n        voteLast: optionalUint64(params.keyregParams.voteLast),\n        voteKeyDilution: optionalUint64(params.keyregParams.voteKeyDilution),\n        nonParticipation: ensureBoolean(params.keyregParams.nonParticipation ?? false)\n      };\n      // Checking non-participation key registration\n      if (this.keyreg.nonParticipation && (this.keyreg.voteKey || this.keyreg.selectionKey || this.keyreg.stateProofKey || typeof this.keyreg.voteFirst !== 'undefined' || typeof this.keyreg.voteLast !== 'undefined' || typeof this.keyreg.voteKeyDilution !== 'undefined')) {\n        throw new Error('nonParticipation is true but participation params are present.');\n      }\n      // Checking online key registration\n      if (\n      // If we are participating\n      !this.keyreg.nonParticipation && (\n      // And *ANY* participating fields are present\n      this.keyreg.voteKey || this.keyreg.selectionKey || this.keyreg.stateProofKey || typeof this.keyreg.voteFirst !== 'undefined' || typeof this.keyreg.voteLast !== 'undefined' || typeof this.keyreg.voteKeyDilution !== 'undefined') &&\n      // Then *ALL* participating fields must be present (with an exception for stateProofKey,\n      // which was introduced later so for backwards compatibility we don't require it)\n      !(this.keyreg.voteKey && this.keyreg.selectionKey && typeof this.keyreg.voteFirst !== 'undefined' && typeof this.keyreg.voteLast !== 'undefined' && typeof this.keyreg.voteKeyDilution !== 'undefined')) {\n        throw new Error(`Online key registration missing at least one of the following fields: voteKey, selectionKey, voteFirst, voteLast, voteKeyDilution`);\n      }\n      // The last option is an offline key registration where all the fields\n      // nonParticipation, voteKey, selectionKey, stateProofKey, voteFirst, voteLast, voteKeyDilution\n      // are all undefined\n    }\n    if (params.assetConfigParams) {\n      this.assetConfig = {\n        assetIndex: utils.ensureUint64(params.assetConfigParams.assetIndex ?? 0),\n        total: utils.ensureUint64(params.assetConfigParams.total ?? 0),\n        decimals: utils.ensureSafeUnsignedInteger(params.assetConfigParams.decimals ?? 0),\n        defaultFrozen: ensureBoolean(params.assetConfigParams.defaultFrozen ?? false),\n        manager: optionalAddress(params.assetConfigParams.manager),\n        reserve: optionalAddress(params.assetConfigParams.reserve),\n        freeze: optionalAddress(params.assetConfigParams.freeze),\n        clawback: optionalAddress(params.assetConfigParams.clawback),\n        unitName: params.assetConfigParams.unitName,\n        assetName: params.assetConfigParams.assetName,\n        assetURL: params.assetConfigParams.assetURL,\n        assetMetadataHash: optionalFixedLengthByteArray(params.assetConfigParams.assetMetadataHash, ASSET_METADATA_HASH_LENGTH, 'assetMetadataHash')\n      };\n    }\n    if (params.assetTransferParams) {\n      this.assetTransfer = {\n        assetIndex: utils.ensureUint64(params.assetTransferParams.assetIndex),\n        amount: utils.ensureUint64(params.assetTransferParams.amount),\n        assetSender: optionalAddress(params.assetTransferParams.assetSender),\n        receiver: ensureAddress(params.assetTransferParams.receiver),\n        closeRemainderTo: optionalAddress(params.assetTransferParams.closeRemainderTo)\n      };\n    }\n    if (params.assetFreezeParams) {\n      this.assetFreeze = {\n        assetIndex: utils.ensureUint64(params.assetFreezeParams.assetIndex),\n        freezeAccount: ensureAddress(params.assetFreezeParams.freezeTarget),\n        frozen: ensureBoolean(params.assetFreezeParams.frozen)\n      };\n    }\n    if (params.appCallParams) {\n      const {\n        onComplete\n      } = params.appCallParams;\n      if (!isOnApplicationComplete(onComplete)) {\n        throw new Error(`Invalid onCompletion value: ${onComplete}`);\n      }\n      this.applicationCall = {\n        appIndex: utils.ensureUint64(params.appCallParams.appIndex),\n        onComplete,\n        numLocalInts: utils.ensureSafeUnsignedInteger(params.appCallParams.numLocalInts ?? 0),\n        numLocalByteSlices: utils.ensureSafeUnsignedInteger(params.appCallParams.numLocalByteSlices ?? 0),\n        numGlobalInts: utils.ensureSafeUnsignedInteger(params.appCallParams.numGlobalInts ?? 0),\n        numGlobalByteSlices: utils.ensureSafeUnsignedInteger(params.appCallParams.numGlobalByteSlices ?? 0),\n        extraPages: utils.ensureSafeUnsignedInteger(params.appCallParams.extraPages ?? 0),\n        approvalProgram: ensureUint8Array(params.appCallParams.approvalProgram ?? new Uint8Array()),\n        clearProgram: ensureUint8Array(params.appCallParams.clearProgram ?? new Uint8Array()),\n        appArgs: ensureArray(params.appCallParams.appArgs ?? []).map(ensureUint8Array),\n        accounts: ensureArray(params.appCallParams.accounts ?? []).map(ensureAddress),\n        foreignApps: ensureArray(params.appCallParams.foreignApps ?? []).map(utils.ensureUint64),\n        foreignAssets: ensureArray(params.appCallParams.foreignAssets ?? []).map(utils.ensureUint64),\n        boxes: ensureArray(params.appCallParams.boxes ?? []).map(ensureBoxReference)\n      };\n    }\n    if (params.stateProofParams) {\n      this.stateProof = {\n        stateProofType: utils.ensureSafeUnsignedInteger(params.stateProofParams.stateProofType ?? 0),\n        stateProof: params.stateProofParams.stateProof,\n        message: params.stateProofParams.message\n      };\n    }\n    if (params.heartbeatParams) {\n      this.heartbeat = new Heartbeat({\n        address: params.heartbeatParams.address,\n        proof: params.heartbeatParams.proof,\n        seed: params.heartbeatParams.seed,\n        voteID: params.heartbeatParams.voteID,\n        keyDilution: params.heartbeatParams.keyDilution\n      });\n    }\n    // Determine fee\n    this.fee = utils.ensureUint64(params.suggestedParams.fee);\n    const feeDependsOnSize = !ensureBoolean(params.suggestedParams.flatFee ?? false);\n    if (feeDependsOnSize) {\n      const minFee = utils.ensureUint64(params.suggestedParams.minFee);\n      this.fee *= BigInt(this.estimateSize());\n      // If suggested fee too small and will be rejected, set to min tx fee\n      if (this.fee < minFee) {\n        this.fee = minFee;\n      }\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  getEncodingSchema() {\n    return Transaction.encodingSchema;\n  }\n  toEncodingData() {\n    const data = new Map([['type', this.type], ['fv', this.firstValid], ['lv', this.lastValid], ['snd', this.sender], ['gen', this.genesisID], ['gh', this.genesisHash], ['fee', this.fee], ['note', this.note], ['lx', this.lease], ['rekey', this.rekeyTo], ['grp', this.group]]);\n    if (this.payment) {\n      data.set('amt', this.payment.amount);\n      data.set('rcv', this.payment.receiver);\n      data.set('close', this.payment.closeRemainderTo);\n      return data;\n    }\n    if (this.keyreg) {\n      data.set('votekey', this.keyreg.voteKey);\n      data.set('selkey', this.keyreg.selectionKey);\n      data.set('sprfkey', this.keyreg.stateProofKey);\n      data.set('votefst', this.keyreg.voteFirst);\n      data.set('votelst', this.keyreg.voteLast);\n      data.set('votekd', this.keyreg.voteKeyDilution);\n      data.set('nonpart', this.keyreg.nonParticipation);\n      return data;\n    }\n    if (this.assetConfig) {\n      data.set('caid', this.assetConfig.assetIndex);\n      const assetParams = new Map([['t', this.assetConfig.total], ['dc', this.assetConfig.decimals], ['df', this.assetConfig.defaultFrozen], ['m', this.assetConfig.manager], ['r', this.assetConfig.reserve], ['f', this.assetConfig.freeze], ['c', this.assetConfig.clawback], ['un', this.assetConfig.unitName], ['an', this.assetConfig.assetName], ['au', this.assetConfig.assetURL], ['am', this.assetConfig.assetMetadataHash]]);\n      data.set('apar', assetParams);\n      return data;\n    }\n    if (this.assetTransfer) {\n      data.set('xaid', this.assetTransfer.assetIndex);\n      data.set('aamt', this.assetTransfer.amount);\n      data.set('arcv', this.assetTransfer.receiver);\n      data.set('aclose', this.assetTransfer.closeRemainderTo);\n      data.set('asnd', this.assetTransfer.assetSender);\n      return data;\n    }\n    if (this.assetFreeze) {\n      data.set('faid', this.assetFreeze.assetIndex);\n      data.set('afrz', this.assetFreeze.frozen);\n      data.set('fadd', this.assetFreeze.freezeAccount);\n      return data;\n    }\n    if (this.applicationCall) {\n      data.set('apid', this.applicationCall.appIndex);\n      data.set('apan', this.applicationCall.onComplete);\n      data.set('apaa', this.applicationCall.appArgs);\n      data.set('apat', this.applicationCall.accounts);\n      data.set('apas', this.applicationCall.foreignAssets);\n      data.set('apfa', this.applicationCall.foreignApps);\n      data.set('apbx', boxReferencesToEncodingData(this.applicationCall.boxes, this.applicationCall.foreignApps, this.applicationCall.appIndex));\n      data.set('apap', this.applicationCall.approvalProgram);\n      data.set('apsu', this.applicationCall.clearProgram);\n      data.set('apls', new Map([['nui', this.applicationCall.numLocalInts], ['nbs', this.applicationCall.numLocalByteSlices]]));\n      data.set('apgs', new Map([['nui', this.applicationCall.numGlobalInts], ['nbs', this.applicationCall.numGlobalByteSlices]]));\n      data.set('apep', this.applicationCall.extraPages);\n      return data;\n    }\n    if (this.stateProof) {\n      data.set('sptype', this.stateProof.stateProofType);\n      data.set('sp', this.stateProof.stateProof ? this.stateProof.stateProof.toEncodingData() : undefined);\n      data.set('spmsg', this.stateProof.message ? this.stateProof.message.toEncodingData() : undefined);\n      return data;\n    }\n    if (this.heartbeat) {\n      const heartbeat = new Heartbeat({\n        address: this.heartbeat.address,\n        proof: this.heartbeat.proof,\n        seed: this.heartbeat.seed,\n        voteID: this.heartbeat.voteID,\n        keyDilution: this.heartbeat.keyDilution\n      });\n      data.set('hb', heartbeat.toEncodingData());\n      return data;\n    }\n    throw new Error(`Unexpected transaction type: ${this.type}`);\n  }\n  static fromEncodingData(data) {\n    if (!(data instanceof Map)) {\n      throw new Error(`Invalid decoded logic sig account: ${data}`);\n    }\n    const suggestedParams = {\n      minFee: BigInt(0),\n      flatFee: true,\n      fee: data.get('fee') ?? 0,\n      firstValid: data.get('fv') ?? 0,\n      lastValid: data.get('lv') ?? 0,\n      genesisHash: data.get('gh'),\n      genesisID: data.get('gen')\n    };\n    const txnType = data.get('type');\n    if (!isTransactionType(txnType)) {\n      throw new Error(`Unrecognized transaction type: ${txnType}`);\n    }\n    const params = {\n      type: txnType,\n      sender: data.get('snd') ?? Address.zeroAddress(),\n      note: data.get('note'),\n      lease: data.get('lx'),\n      suggestedParams\n    };\n    if (data.get('rekey')) {\n      params.rekeyTo = data.get('rekey');\n    }\n    if (params.type === TransactionType.pay) {\n      const paymentParams = {\n        amount: data.get('amt') ?? 0,\n        receiver: data.get('rcv') ?? Address.zeroAddress()\n      };\n      if (data.get('close')) {\n        paymentParams.closeRemainderTo = data.get('close');\n      }\n      params.paymentParams = paymentParams;\n    } else if (params.type === TransactionType.keyreg) {\n      const keyregParams = {\n        voteKey: data.get('votekey'),\n        selectionKey: data.get('selkey'),\n        stateProofKey: data.get('sprfkey'),\n        voteFirst: data.get('votefst'),\n        voteLast: data.get('votelst'),\n        voteKeyDilution: data.get('votekd'),\n        nonParticipation: data.get('nonpart')\n      };\n      params.keyregParams = keyregParams;\n    } else if (params.type === TransactionType.acfg) {\n      const assetConfigParams = {\n        assetIndex: data.get('caid')\n      };\n      if (data.get('apar')) {\n        const assetParams = data.get('apar');\n        assetConfigParams.total = assetParams.get('t');\n        assetConfigParams.decimals = assetParams.get('dc');\n        assetConfigParams.defaultFrozen = assetParams.get('df');\n        assetConfigParams.unitName = assetParams.get('un');\n        assetConfigParams.assetName = assetParams.get('an');\n        assetConfigParams.assetURL = assetParams.get('au');\n        assetConfigParams.assetMetadataHash = assetParams.get('am');\n        if (assetParams.get('m')) {\n          assetConfigParams.manager = assetParams.get('m');\n        }\n        if (assetParams.get('r')) {\n          assetConfigParams.reserve = assetParams.get('r');\n        }\n        if (assetParams.get('f')) {\n          assetConfigParams.freeze = assetParams.get('f');\n        }\n        if (assetParams.get('c')) {\n          assetConfigParams.clawback = assetParams.get('c');\n        }\n      }\n      params.assetConfigParams = assetConfigParams;\n    } else if (params.type === TransactionType.axfer) {\n      const assetTransferParams = {\n        assetIndex: data.get('xaid') ?? 0,\n        amount: data.get('aamt') ?? 0,\n        receiver: data.get('arcv') ?? Address.zeroAddress()\n      };\n      if (data.get('aclose')) {\n        assetTransferParams.closeRemainderTo = data.get('aclose');\n      }\n      if (data.get('asnd')) {\n        assetTransferParams.assetSender = data.get('asnd');\n      }\n      params.assetTransferParams = assetTransferParams;\n    } else if (params.type === TransactionType.afrz) {\n      const assetFreezeParams = {\n        assetIndex: data.get('faid') ?? 0,\n        freezeTarget: data.get('fadd') ?? Address.zeroAddress(),\n        frozen: data.get('afrz') ?? false\n      };\n      params.assetFreezeParams = assetFreezeParams;\n    } else if (params.type === TransactionType.appl) {\n      const appCallParams = {\n        appIndex: data.get('apid') ?? 0,\n        onComplete: utils.ensureSafeUnsignedInteger(data.get('apan') ?? 0),\n        appArgs: data.get('apaa'),\n        accounts: data.get('apat'),\n        foreignAssets: data.get('apas'),\n        foreignApps: data.get('apfa'),\n        approvalProgram: data.get('apap'),\n        clearProgram: data.get('apsu'),\n        extraPages: data.get('apep')\n      };\n      const localSchema = data.get('apls');\n      if (localSchema) {\n        appCallParams.numLocalInts = localSchema.get('nui');\n        appCallParams.numLocalByteSlices = localSchema.get('nbs');\n      }\n      const globalSchema = data.get('apgs');\n      if (globalSchema) {\n        appCallParams.numGlobalInts = globalSchema.get('nui');\n        appCallParams.numGlobalByteSlices = globalSchema.get('nbs');\n      }\n      const boxes = data.get('apbx');\n      if (boxes) {\n        appCallParams.boxes = boxes.map(box => {\n          const index = utils.ensureSafeUnsignedInteger(box.get('i') ?? 0);\n          const name = ensureUint8Array(box.get('n') ?? new Uint8Array());\n          if (index === 0) {\n            // We return 0 for the app ID so that it's guaranteed translateBoxReferences will\n            // translate the app index back to 0. If we instead returned the called app ID,\n            // translateBoxReferences would translate the app index to a nonzero value if the called\n            // app is also in the foreign app array.\n            return {\n              appIndex: 0,\n              name\n            };\n          }\n          if (!appCallParams.foreignApps || index > appCallParams.foreignApps.length) {\n            throw new Error(`Cannot find foreign app index ${index} in ${appCallParams.foreignApps}`);\n          }\n          return {\n            appIndex: appCallParams.foreignApps[index - 1],\n            name\n          };\n        });\n      }\n      params.appCallParams = appCallParams;\n    } else if (params.type === TransactionType.stpf) {\n      const stateProofParams = {\n        stateProofType: data.get('sptype'),\n        stateProof: data.get('sp') ? StateProof.fromEncodingData(data.get('sp')) : undefined,\n        message: data.get('spmsg') ? StateProofMessage.fromEncodingData(data.get('spmsg')) : undefined\n      };\n      params.stateProofParams = stateProofParams;\n    } else if (params.type === TransactionType.hb) {\n      const heartbeat = Heartbeat.fromEncodingData(data.get('hb'));\n      const heartbeatParams = {\n        address: heartbeat.address,\n        proof: heartbeat.proof,\n        seed: heartbeat.seed,\n        voteID: heartbeat.voteID,\n        keyDilution: heartbeat.keyDilution\n      };\n      params.heartbeatParams = heartbeatParams;\n    } else {\n      const exhaustiveCheck = params.type;\n      throw new Error(`Unexpected transaction type: ${exhaustiveCheck}`);\n    }\n    const txn = new Transaction(params);\n    if (data.get('grp')) {\n      const group = ensureUint8Array(data.get('grp'));\n      if (group.byteLength !== ALGORAND_TRANSACTION_GROUP_LENGTH) {\n        throw new Error(`Invalid group length: ${group.byteLength}`);\n      }\n      txn.group = group;\n    }\n    return txn;\n  }\n  estimateSize() {\n    return this.toByte().length + NUM_ADDL_BYTES_AFTER_SIGNING;\n  }\n  bytesToSign() {\n    const encodedMsg = this.toByte();\n    return utils.concatArrays(TX_TAG, encodedMsg);\n  }\n  toByte() {\n    return encoding.encodeMsgpack(this);\n  }\n  // returns the raw signature\n  rawSignTxn(sk) {\n    const toBeSigned = this.bytesToSign();\n    const sig = nacl.sign(toBeSigned, sk);\n    return sig;\n  }\n  signTxn(sk) {\n    // TODO: deprecate in favor of SignedTransaction class\n    const keypair = nacl.keyPairFromSecretKey(sk);\n    const signerAddr = new Address(keypair.publicKey);\n    const sig = this.rawSignTxn(sk);\n    return this.attachSignature(signerAddr, sig);\n  }\n  attachSignature(signerAddr, signature) {\n    // TODO: deprecate in favor of SignedTransaction class\n    if (!nacl.isValidSignatureLength(signature.length)) {\n      throw new Error('Invalid signature length');\n    }\n    const sTxn = new Map([['sig', signature], ['txn', this.toEncodingData()]]);\n    const signerAddrObj = ensureAddress(signerAddr);\n    // add AuthAddr if signing with a different key than From indicates\n    if (!this.sender.equals(signerAddrObj)) {\n      sTxn.set('sgnr', signerAddrObj);\n    }\n    // This is a hack to avoid a circular reference with the SignedTransaction class\n    const stxnSchema = new NamedMapSchema(allOmitEmpty([{\n      key: 'txn',\n      valueSchema: Transaction.encodingSchema\n    }, {\n      key: 'sig',\n      valueSchema: new FixedLengthByteArraySchema(64)\n    }, {\n      key: 'sgnr',\n      valueSchema: new OptionalSchema(new AddressSchema())\n    }]));\n    return encoding.msgpackRawEncode(stxnSchema.prepareMsgpack(sTxn));\n  }\n  rawTxID() {\n    const enMsg = this.toByte();\n    const gh = utils.concatArrays(TX_TAG, enMsg);\n    return Uint8Array.from(nacl.genericHash(gh));\n  }\n  txID() {\n    const hash = this.rawTxID();\n    return base32.encode(hash).slice(0, ALGORAND_TRANSACTION_LENGTH);\n  }\n}\nTransaction.encodingSchema = new NamedMapSchema(allOmitEmpty([\n// Common\n{\n  key: 'type',\n  valueSchema: new StringSchema()\n}, {\n  key: 'snd',\n  valueSchema: new AddressSchema()\n}, {\n  key: 'lv',\n  valueSchema: new Uint64Schema()\n}, {\n  key: 'gen',\n  valueSchema: new OptionalSchema(new StringSchema())\n}, {\n  key: 'gh',\n  valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32))\n}, {\n  key: 'fee',\n  valueSchema: new Uint64Schema()\n}, {\n  key: 'fv',\n  valueSchema: new Uint64Schema()\n}, {\n  key: 'note',\n  valueSchema: new ByteArraySchema()\n}, {\n  key: 'lx',\n  valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32))\n}, {\n  key: 'rekey',\n  valueSchema: new OptionalSchema(new AddressSchema())\n}, {\n  key: 'grp',\n  valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32))\n},\n// We mark all top-level type-specific fields optional because they will not be present when\n// the transaction is not that type.\n// Payment\n{\n  key: 'amt',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'rcv',\n  valueSchema: new OptionalSchema(new AddressSchema())\n}, {\n  key: 'close',\n  valueSchema: new OptionalSchema(new AddressSchema())\n},\n// Keyreg\n{\n  key: 'votekey',\n  valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32))\n}, {\n  key: 'selkey',\n  valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32))\n}, {\n  key: 'sprfkey',\n  valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(64))\n}, {\n  key: 'votefst',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'votelst',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'votekd',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'nonpart',\n  valueSchema: new OptionalSchema(new BooleanSchema())\n},\n// AssetConfig\n{\n  key: 'caid',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'apar',\n  valueSchema: new OptionalSchema(new NamedMapSchema(allOmitEmpty([{\n    key: 't',\n    valueSchema: new Uint64Schema()\n  }, {\n    key: 'dc',\n    valueSchema: new Uint64Schema()\n  }, {\n    key: 'df',\n    valueSchema: new BooleanSchema()\n  }, {\n    key: 'm',\n    valueSchema: new OptionalSchema(new AddressSchema())\n  }, {\n    key: 'r',\n    valueSchema: new OptionalSchema(new AddressSchema())\n  }, {\n    key: 'f',\n    valueSchema: new OptionalSchema(new AddressSchema())\n  }, {\n    key: 'c',\n    valueSchema: new OptionalSchema(new AddressSchema())\n  }, {\n    key: 'un',\n    valueSchema: new OptionalSchema(new StringSchema())\n  }, {\n    key: 'an',\n    valueSchema: new OptionalSchema(new StringSchema())\n  }, {\n    key: 'au',\n    valueSchema: new OptionalSchema(new StringSchema())\n  }, {\n    key: 'am',\n    valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32))\n  }])))\n},\n// AssetTransfer\n{\n  key: 'xaid',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'aamt',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'arcv',\n  valueSchema: new OptionalSchema(new AddressSchema())\n}, {\n  key: 'aclose',\n  valueSchema: new OptionalSchema(new AddressSchema())\n}, {\n  key: 'asnd',\n  valueSchema: new OptionalSchema(new AddressSchema())\n},\n// AssetFreeze\n{\n  key: 'faid',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'afrz',\n  valueSchema: new OptionalSchema(new BooleanSchema())\n}, {\n  key: 'fadd',\n  valueSchema: new OptionalSchema(new AddressSchema())\n},\n// Application\n{\n  key: 'apid',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'apan',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'apaa',\n  valueSchema: new OptionalSchema(new ArraySchema(new ByteArraySchema()))\n}, {\n  key: 'apat',\n  valueSchema: new OptionalSchema(new ArraySchema(new AddressSchema()))\n}, {\n  key: 'apas',\n  valueSchema: new OptionalSchema(new ArraySchema(new Uint64Schema()))\n}, {\n  key: 'apfa',\n  valueSchema: new OptionalSchema(new ArraySchema(new Uint64Schema()))\n}, {\n  key: 'apbx',\n  valueSchema: new OptionalSchema(new ArraySchema(new NamedMapSchema(allOmitEmpty([{\n    key: 'i',\n    valueSchema: new Uint64Schema()\n  }, {\n    key: 'n',\n    valueSchema: new ByteArraySchema()\n  }]))))\n}, {\n  key: 'apap',\n  valueSchema: new OptionalSchema(new ByteArraySchema())\n}, {\n  key: 'apsu',\n  valueSchema: new OptionalSchema(new ByteArraySchema())\n}, {\n  key: 'apls',\n  valueSchema: new OptionalSchema(new NamedMapSchema(allOmitEmpty([{\n    key: 'nui',\n    valueSchema: new Uint64Schema()\n  }, {\n    key: 'nbs',\n    valueSchema: new Uint64Schema()\n  }])))\n}, {\n  key: 'apgs',\n  valueSchema: new OptionalSchema(new NamedMapSchema(allOmitEmpty([{\n    key: 'nui',\n    valueSchema: new Uint64Schema()\n  }, {\n    key: 'nbs',\n    valueSchema: new Uint64Schema()\n  }])))\n}, {\n  key: 'apep',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n},\n// StateProof\n{\n  key: 'sptype',\n  valueSchema: new OptionalSchema(new Uint64Schema())\n}, {\n  key: 'sp',\n  valueSchema: new OptionalSchema(StateProof.encodingSchema)\n}, {\n  key: 'spmsg',\n  valueSchema: new OptionalSchema(StateProofMessage.encodingSchema)\n},\n// Heartbeat\n{\n  key: 'hb',\n  valueSchema: new OptionalSchema(Heartbeat.encodingSchema)\n}]));\n/**\n * encodeUnsignedTransaction takes a completed txnBuilder.Transaction object, such as from the makeFoo\n * family of transactions, and converts it to a Buffer\n * @param transactionObject - the completed Transaction object\n */\nexport function encodeUnsignedTransaction(transactionObject) {\n  return encoding.encodeMsgpack(transactionObject);\n}\n/**\n * decodeUnsignedTransaction takes a Uint8Array (as if from encodeUnsignedTransaction) and converts it to a txnBuilder.Transaction object\n * @param transactionBuffer - the Uint8Array containing a transaction\n */\nexport function decodeUnsignedTransaction(transactionBuffer) {\n  return encoding.decodeMsgpack(transactionBuffer, Transaction);\n}","map":{"version":3,"names":["base32","boxReferencesToEncodingData","Address","encoding","AddressSchema","Uint64Schema","ByteArraySchema","FixedLengthByteArraySchema","StringSchema","ArraySchema","NamedMapSchema","BooleanSchema","OptionalSchema","allOmitEmpty","nacl","isOnApplicationComplete","TransactionType","isTransactionType","StateProof","StateProofMessage","Heartbeat","utils","ALGORAND_TRANSACTION_LENGTH","ALGORAND_TRANSACTION_LEASE_LENGTH","NUM_ADDL_BYTES_AFTER_SIGNING","ASSET_METADATA_HASH_LENGTH","KEYREG_VOTE_KEY_LENGTH","KEYREG_SELECTION_KEY_LENGTH","KEYREG_STATE_PROOF_KEY_LENGTH","ALGORAND_TRANSACTION_GROUP_LENGTH","uint8ArrayIsEmpty","input","every","value","getKeyregKey","inputName","length","undefined","inputBytes","Uint8Array","byteLength","Error","ensureAddress","fromString","optionalAddress","addr","publicKey","optionalUint8Array","ensureUint8Array","optionalUint64","ensureUint64","ensureBoolean","ensureArray","Array","isArray","slice","optionalFixedLengthByteArray","name","bytes","ensureBoxReference","appIndex","TX_TAG","TextEncoder","encode","Transaction","constructor","params","type","sender","note","lease","rekeyTo","group","firstValid","suggestedParams","lastValid","genesisID","genesisHash","fieldsPresent","paymentParams","push","pay","keyregParams","keyreg","assetConfigParams","acfg","assetTransferParams","axfer","assetFreezeParams","afrz","appCallParams","appl","stateProofParams","stpf","heartbeatParams","hb","payment","receiver","amount","closeRemainderTo","voteKey","selectionKey","stateProofKey","voteFirst","voteLast","voteKeyDilution","nonParticipation","assetConfig","assetIndex","total","decimals","ensureSafeUnsignedInteger","defaultFrozen","manager","reserve","freeze","clawback","unitName","assetName","assetURL","assetMetadataHash","assetTransfer","assetSender","assetFreeze","freezeAccount","freezeTarget","frozen","onComplete","applicationCall","numLocalInts","numLocalByteSlices","numGlobalInts","numGlobalByteSlices","extraPages","approvalProgram","clearProgram","appArgs","map","accounts","foreignApps","foreignAssets","boxes","stateProof","stateProofType","message","heartbeat","address","proof","seed","voteID","keyDilution","fee","feeDependsOnSize","flatFee","minFee","BigInt","estimateSize","getEncodingSchema","encodingSchema","toEncodingData","data","Map","set","assetParams","fromEncodingData","get","txnType","zeroAddress","localSchema","globalSchema","box","index","exhaustiveCheck","txn","toByte","bytesToSign","encodedMsg","concatArrays","encodeMsgpack","rawSignTxn","sk","toBeSigned","sig","sign","signTxn","keypair","keyPairFromSecretKey","signerAddr","attachSignature","signature","isValidSignatureLength","sTxn","signerAddrObj","equals","stxnSchema","key","valueSchema","msgpackRawEncode","prepareMsgpack","rawTxID","enMsg","gh","from","genericHash","txID","hash","encodeUnsignedTransaction","transactionObject","decodeUnsignedTransaction","transactionBuffer","decodeMsgpack"],"sources":["C:\\Users\\naga shiva kumari\\OneDrive\\node_modules\\algosdk\\src\\transaction.ts"],"sourcesContent":["import base32 from 'hi-base32';\nimport { boxReferencesToEncodingData } from './boxStorage.js';\nimport { Address } from './encoding/address.js';\nimport * as encoding from './encoding/encoding.js';\nimport {\n  AddressSchema,\n  Uint64Schema,\n  ByteArraySchema,\n  FixedLengthByteArraySchema,\n  StringSchema,\n  ArraySchema,\n  NamedMapSchema,\n  BooleanSchema,\n  OptionalSchema,\n  allOmitEmpty,\n} from './encoding/schema/index.js';\nimport * as nacl from './nacl/naclWrappers.js';\nimport {\n  SuggestedParams,\n  BoxReference,\n  OnApplicationComplete,\n  isOnApplicationComplete,\n  TransactionParams,\n  TransactionType,\n  isTransactionType,\n  PaymentTransactionParams,\n  AssetConfigurationTransactionParams,\n  AssetTransferTransactionParams,\n  AssetFreezeTransactionParams,\n  KeyRegistrationTransactionParams,\n  ApplicationCallTransactionParams,\n  StateProofTransactionParams,\n  HeartbeatTransactionParams,\n} from './types/transactions/base.js';\nimport { StateProof, StateProofMessage } from './stateproof.js';\nimport { Heartbeat, HeartbeatProof } from './heartbeat.js';\nimport * as utils from './utils/utils.js';\n\nconst ALGORAND_TRANSACTION_LENGTH = 52;\nconst ALGORAND_TRANSACTION_LEASE_LENGTH = 32;\nconst NUM_ADDL_BYTES_AFTER_SIGNING = 75; // NUM_ADDL_BYTES_AFTER_SIGNING is the number of bytes added to a txn after signing it\nconst ASSET_METADATA_HASH_LENGTH = 32;\nconst KEYREG_VOTE_KEY_LENGTH = 32;\nconst KEYREG_SELECTION_KEY_LENGTH = 32;\nconst KEYREG_STATE_PROOF_KEY_LENGTH = 64;\nconst ALGORAND_TRANSACTION_GROUP_LENGTH = 32;\n\nfunction uint8ArrayIsEmpty(input: Uint8Array): boolean {\n  return input.every((value) => value === 0);\n}\n\nfunction getKeyregKey(\n  input: undefined | string | Uint8Array,\n  inputName: string,\n  length: number\n): Uint8Array | undefined {\n  if (input == null) {\n    return undefined;\n  }\n\n  let inputBytes: Uint8Array | undefined;\n\n  if (input instanceof Uint8Array) {\n    inputBytes = input;\n  }\n\n  if (inputBytes == null || inputBytes.byteLength !== length) {\n    throw Error(`${inputName} must be a ${length} byte Uint8Array`);\n  }\n\n  return inputBytes;\n}\n\nfunction ensureAddress(input: unknown): Address {\n  if (input == null) {\n    throw new Error('Address must not be null or undefined');\n  }\n  if (typeof input === 'string') {\n    return Address.fromString(input);\n  }\n  if (input instanceof Address) {\n    return input;\n  }\n  throw new Error(`Not an address: ${input}`);\n}\n\nfunction optionalAddress(input: unknown): Address | undefined {\n  if (input == null) {\n    return undefined;\n  }\n  let addr: Address;\n  if (input instanceof Address) {\n    addr = input;\n  } else if (typeof input === 'string') {\n    addr = Address.fromString(input);\n  } else {\n    throw new Error(`Not an address: ${input}`);\n  }\n  if (uint8ArrayIsEmpty(addr.publicKey)) {\n    // If it's the zero address, throw an error so that the user won't be surprised that this gets dropped\n    throw new Error(\n      'Invalid use of the zero address. To omit this value, pass in undefined'\n    );\n  }\n  return addr;\n}\n\nfunction optionalUint8Array(input: unknown): Uint8Array | undefined {\n  if (typeof input === 'undefined') {\n    return undefined;\n  }\n  if (input instanceof Uint8Array) {\n    return input;\n  }\n  throw new Error(`Not a Uint8Array: ${input}`);\n}\n\nfunction ensureUint8Array(input: unknown): Uint8Array {\n  if (input instanceof Uint8Array) {\n    return input;\n  }\n  throw new Error(`Not a Uint8Array: ${input}`);\n}\n\nfunction optionalUint64(input: unknown): bigint | undefined {\n  if (typeof input === 'undefined') {\n    return undefined;\n  }\n  return utils.ensureUint64(input);\n}\n\nfunction ensureBoolean(input: unknown): boolean {\n  if (input === true || input === false) {\n    return input;\n  }\n  throw new Error(`Not a boolean: ${input}`);\n}\n\nfunction ensureArray(input: unknown): unknown[] {\n  if (Array.isArray(input)) {\n    return input.slice();\n  }\n  throw new Error(`Not an array: ${input}`);\n}\n\nfunction optionalFixedLengthByteArray(\n  input: unknown,\n  length: number,\n  name: string\n): Uint8Array | undefined {\n  const bytes = optionalUint8Array(input);\n  if (typeof bytes === 'undefined') {\n    return undefined;\n  }\n  if (bytes.byteLength !== length) {\n    throw new Error(\n      `${name} must be ${length} bytes long, was ${bytes.byteLength}`\n    );\n  }\n  if (uint8ArrayIsEmpty(bytes)) {\n    // if contains all 0s, omit it\n    return undefined;\n  }\n  return bytes;\n}\n\nexport interface TransactionBoxReference {\n  readonly appIndex: bigint;\n  readonly name: Uint8Array;\n}\n\nfunction ensureBoxReference(input: unknown): TransactionBoxReference {\n  if (input != null && typeof input === 'object') {\n    const { appIndex, name } = input as BoxReference;\n    return {\n      appIndex: utils.ensureUint64(appIndex),\n      name: ensureUint8Array(name),\n    };\n  }\n  throw new Error(`Not a box reference: ${input}`);\n}\n\nconst TX_TAG = new TextEncoder().encode('TX');\n\nexport interface PaymentTransactionFields {\n  readonly receiver: Address;\n  readonly amount: bigint;\n  readonly closeRemainderTo?: Address;\n}\n\nexport interface KeyRegistrationTransactionFields {\n  readonly voteKey?: Uint8Array;\n  readonly selectionKey?: Uint8Array;\n  readonly stateProofKey?: Uint8Array;\n  readonly voteFirst?: bigint;\n  readonly voteLast?: bigint;\n  readonly voteKeyDilution?: bigint;\n  readonly nonParticipation: boolean;\n}\n\nexport interface AssetConfigTransactionFields {\n  readonly assetIndex: bigint;\n  readonly total: bigint;\n  readonly decimals: number;\n  readonly defaultFrozen: boolean;\n  readonly manager?: Address;\n  readonly reserve?: Address;\n  readonly freeze?: Address;\n  readonly clawback?: Address;\n  readonly unitName?: string;\n  readonly assetName?: string;\n  readonly assetURL?: string;\n  readonly assetMetadataHash?: Uint8Array;\n}\n\nexport interface AssetTransferTransactionFields {\n  readonly assetIndex: bigint;\n  readonly amount: bigint;\n  readonly assetSender?: Address;\n  readonly receiver: Address;\n  readonly closeRemainderTo?: Address;\n}\n\nexport interface AssetFreezeTransactionFields {\n  readonly assetIndex: bigint;\n  readonly freezeAccount: Address;\n  readonly frozen: boolean;\n}\n\nexport interface ApplicationTransactionFields {\n  readonly appIndex: bigint;\n  readonly onComplete: OnApplicationComplete;\n  readonly numLocalInts: number;\n  readonly numLocalByteSlices: number;\n  readonly numGlobalInts: number;\n  readonly numGlobalByteSlices: number;\n  readonly extraPages: number;\n  readonly approvalProgram: Uint8Array;\n  readonly clearProgram: Uint8Array;\n  readonly appArgs: ReadonlyArray<Uint8Array>;\n  readonly accounts: ReadonlyArray<Address>;\n  readonly foreignApps: ReadonlyArray<bigint>;\n  readonly foreignAssets: ReadonlyArray<bigint>;\n  readonly boxes: ReadonlyArray<TransactionBoxReference>;\n}\n\nexport interface StateProofTransactionFields {\n  readonly stateProofType: number;\n  readonly stateProof?: StateProof;\n  readonly message?: StateProofMessage;\n}\n\nexport interface HeartbeatTransactionFields {\n  readonly address: Address;\n  readonly proof: HeartbeatProof;\n  readonly seed: Uint8Array;\n  readonly voteID: Uint8Array;\n  readonly keyDilution: bigint;\n}\n\n/**\n * Transaction enables construction of Algorand transactions\n * */\nexport class Transaction implements encoding.Encodable {\n  static readonly encodingSchema = new NamedMapSchema(\n    allOmitEmpty([\n      // Common\n      { key: 'type', valueSchema: new StringSchema() },\n      { key: 'snd', valueSchema: new AddressSchema() },\n      { key: 'lv', valueSchema: new Uint64Schema() },\n      { key: 'gen', valueSchema: new OptionalSchema(new StringSchema()) },\n      {\n        key: 'gh',\n        valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32)),\n      },\n      { key: 'fee', valueSchema: new Uint64Schema() },\n      { key: 'fv', valueSchema: new Uint64Schema() },\n      { key: 'note', valueSchema: new ByteArraySchema() },\n      {\n        key: 'lx',\n        valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32)),\n      },\n      { key: 'rekey', valueSchema: new OptionalSchema(new AddressSchema()) },\n      {\n        key: 'grp',\n        valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32)),\n      },\n      // We mark all top-level type-specific fields optional because they will not be present when\n      // the transaction is not that type.\n      // Payment\n      { key: 'amt', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'rcv', valueSchema: new OptionalSchema(new AddressSchema()) },\n      { key: 'close', valueSchema: new OptionalSchema(new AddressSchema()) },\n      // Keyreg\n      {\n        key: 'votekey',\n        valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32)),\n      },\n      {\n        key: 'selkey',\n        valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(32)),\n      },\n      {\n        key: 'sprfkey',\n        valueSchema: new OptionalSchema(new FixedLengthByteArraySchema(64)),\n      },\n      { key: 'votefst', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'votelst', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'votekd', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'nonpart', valueSchema: new OptionalSchema(new BooleanSchema()) },\n      // AssetConfig\n      { key: 'caid', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      {\n        key: 'apar',\n        valueSchema: new OptionalSchema(\n          new NamedMapSchema(\n            allOmitEmpty([\n              { key: 't', valueSchema: new Uint64Schema() },\n              { key: 'dc', valueSchema: new Uint64Schema() },\n              { key: 'df', valueSchema: new BooleanSchema() },\n              {\n                key: 'm',\n                valueSchema: new OptionalSchema(new AddressSchema()),\n              },\n              {\n                key: 'r',\n                valueSchema: new OptionalSchema(new AddressSchema()),\n              },\n              {\n                key: 'f',\n                valueSchema: new OptionalSchema(new AddressSchema()),\n              },\n              {\n                key: 'c',\n                valueSchema: new OptionalSchema(new AddressSchema()),\n              },\n              {\n                key: 'un',\n                valueSchema: new OptionalSchema(new StringSchema()),\n              },\n              {\n                key: 'an',\n                valueSchema: new OptionalSchema(new StringSchema()),\n              },\n              {\n                key: 'au',\n                valueSchema: new OptionalSchema(new StringSchema()),\n              },\n              {\n                key: 'am',\n                valueSchema: new OptionalSchema(\n                  new FixedLengthByteArraySchema(32)\n                ),\n              },\n            ])\n          )\n        ),\n      },\n      // AssetTransfer\n      { key: 'xaid', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'aamt', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'arcv', valueSchema: new OptionalSchema(new AddressSchema()) },\n      { key: 'aclose', valueSchema: new OptionalSchema(new AddressSchema()) },\n      { key: 'asnd', valueSchema: new OptionalSchema(new AddressSchema()) },\n      // AssetFreeze\n      { key: 'faid', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'afrz', valueSchema: new OptionalSchema(new BooleanSchema()) },\n      { key: 'fadd', valueSchema: new OptionalSchema(new AddressSchema()) },\n      // Application\n      { key: 'apid', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'apan', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      {\n        key: 'apaa',\n        valueSchema: new OptionalSchema(new ArraySchema(new ByteArraySchema())),\n      },\n      {\n        key: 'apat',\n        valueSchema: new OptionalSchema(new ArraySchema(new AddressSchema())),\n      },\n      {\n        key: 'apas',\n        valueSchema: new OptionalSchema(new ArraySchema(new Uint64Schema())),\n      },\n      {\n        key: 'apfa',\n        valueSchema: new OptionalSchema(new ArraySchema(new Uint64Schema())),\n      },\n      {\n        key: 'apbx',\n        valueSchema: new OptionalSchema(\n          new ArraySchema(\n            new NamedMapSchema(\n              allOmitEmpty([\n                {\n                  key: 'i',\n                  valueSchema: new Uint64Schema(),\n                },\n                {\n                  key: 'n',\n                  valueSchema: new ByteArraySchema(),\n                },\n              ])\n            )\n          )\n        ),\n      },\n      { key: 'apap', valueSchema: new OptionalSchema(new ByteArraySchema()) },\n      { key: 'apsu', valueSchema: new OptionalSchema(new ByteArraySchema()) },\n      {\n        key: 'apls',\n        valueSchema: new OptionalSchema(\n          new NamedMapSchema(\n            allOmitEmpty([\n              {\n                key: 'nui',\n                valueSchema: new Uint64Schema(),\n              },\n              {\n                key: 'nbs',\n                valueSchema: new Uint64Schema(),\n              },\n            ])\n          )\n        ),\n      },\n      {\n        key: 'apgs',\n        valueSchema: new OptionalSchema(\n          new NamedMapSchema(\n            allOmitEmpty([\n              {\n                key: 'nui',\n                valueSchema: new Uint64Schema(),\n              },\n              {\n                key: 'nbs',\n                valueSchema: new Uint64Schema(),\n              },\n            ])\n          )\n        ),\n      },\n      { key: 'apep', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      // StateProof\n      { key: 'sptype', valueSchema: new OptionalSchema(new Uint64Schema()) },\n      { key: 'sp', valueSchema: new OptionalSchema(StateProof.encodingSchema) },\n      {\n        key: 'spmsg',\n        valueSchema: new OptionalSchema(StateProofMessage.encodingSchema),\n      },\n      // Heartbeat\n      { key: 'hb', valueSchema: new OptionalSchema(Heartbeat.encodingSchema) },\n    ])\n  );\n\n  /** common */\n  public readonly type: TransactionType;\n  public readonly sender: Address;\n  public readonly note: Uint8Array;\n  public readonly lease?: Uint8Array;\n  public readonly rekeyTo?: Address;\n\n  /** group */\n  public group?: Uint8Array;\n\n  /** suggested params */\n  public fee: bigint;\n  public readonly firstValid: bigint;\n  public readonly lastValid: bigint;\n  public readonly genesisID?: string;\n  public readonly genesisHash?: Uint8Array;\n\n  /** type-specific fields */\n  public readonly payment?: PaymentTransactionFields;\n  public readonly keyreg?: KeyRegistrationTransactionFields;\n  public readonly assetConfig?: AssetConfigTransactionFields;\n  public readonly assetTransfer?: AssetTransferTransactionFields;\n  public readonly assetFreeze?: AssetFreezeTransactionFields;\n  public readonly applicationCall?: ApplicationTransactionFields;\n  public readonly stateProof?: StateProofTransactionFields;\n  public readonly heartbeat?: HeartbeatTransactionFields;\n\n  constructor(params: TransactionParams) {\n    if (!isTransactionType(params.type)) {\n      throw new Error(`Invalid transaction type: ${params.type}`);\n    }\n\n    // Common fields\n    this.type = params.type; // verified above\n    this.sender = ensureAddress(params.sender);\n    this.note = ensureUint8Array(params.note ?? new Uint8Array());\n    this.lease = optionalFixedLengthByteArray(\n      params.lease,\n      ALGORAND_TRANSACTION_LEASE_LENGTH,\n      'lease'\n    );\n    this.rekeyTo = optionalAddress(params.rekeyTo);\n\n    // Group\n    this.group = undefined;\n\n    // Suggested params fields\n    this.firstValid = utils.ensureUint64(params.suggestedParams.firstValid);\n    this.lastValid = utils.ensureUint64(params.suggestedParams.lastValid);\n    if (params.suggestedParams.genesisID) {\n      if (typeof params.suggestedParams.genesisID !== 'string') {\n        throw new Error('Genesis ID must be a string if present');\n      }\n      this.genesisID = params.suggestedParams.genesisID;\n    }\n    this.genesisHash = optionalUint8Array(params.suggestedParams.genesisHash);\n    // Fee is handled at the end\n\n    const fieldsPresent: TransactionType[] = [];\n    if (params.paymentParams) fieldsPresent.push(TransactionType.pay);\n    if (params.keyregParams) fieldsPresent.push(TransactionType.keyreg);\n    if (params.assetConfigParams) fieldsPresent.push(TransactionType.acfg);\n    if (params.assetTransferParams) fieldsPresent.push(TransactionType.axfer);\n    if (params.assetFreezeParams) fieldsPresent.push(TransactionType.afrz);\n    if (params.appCallParams) fieldsPresent.push(TransactionType.appl);\n    if (params.stateProofParams) fieldsPresent.push(TransactionType.stpf);\n    if (params.heartbeatParams) fieldsPresent.push(TransactionType.hb);\n\n    if (fieldsPresent.length !== 1) {\n      throw new Error(\n        `Transaction has wrong number of type fields present (${fieldsPresent.length}): ${fieldsPresent}`\n      );\n    }\n\n    if (this.type !== fieldsPresent[0]) {\n      throw new Error(\n        `Transaction has type ${this.type} but fields present for ${fieldsPresent[0]}`\n      );\n    }\n\n    if (params.paymentParams) {\n      this.payment = {\n        receiver: ensureAddress(params.paymentParams.receiver),\n        amount: utils.ensureUint64(params.paymentParams.amount),\n        closeRemainderTo: optionalAddress(\n          params.paymentParams.closeRemainderTo\n        ),\n      };\n    }\n\n    if (params.keyregParams) {\n      this.keyreg = {\n        voteKey: getKeyregKey(\n          params.keyregParams.voteKey,\n          'voteKey',\n          KEYREG_VOTE_KEY_LENGTH\n        )!,\n        selectionKey: getKeyregKey(\n          params.keyregParams.selectionKey,\n          'selectionKey',\n          KEYREG_SELECTION_KEY_LENGTH\n        )!,\n        stateProofKey: getKeyregKey(\n          params.keyregParams.stateProofKey,\n          'stateProofKey',\n          KEYREG_STATE_PROOF_KEY_LENGTH\n        )!,\n        voteFirst: optionalUint64(params.keyregParams.voteFirst),\n        voteLast: optionalUint64(params.keyregParams.voteLast),\n        voteKeyDilution: optionalUint64(params.keyregParams.voteKeyDilution),\n        nonParticipation: ensureBoolean(\n          params.keyregParams.nonParticipation ?? false\n        ),\n      };\n      // Checking non-participation key registration\n      if (\n        this.keyreg.nonParticipation &&\n        (this.keyreg.voteKey ||\n          this.keyreg.selectionKey ||\n          this.keyreg.stateProofKey ||\n          typeof this.keyreg.voteFirst !== 'undefined' ||\n          typeof this.keyreg.voteLast !== 'undefined' ||\n          typeof this.keyreg.voteKeyDilution !== 'undefined')\n      ) {\n        throw new Error(\n          'nonParticipation is true but participation params are present.'\n        );\n      }\n      // Checking online key registration\n      if (\n        // If we are participating\n        !this.keyreg.nonParticipation &&\n        // And *ANY* participating fields are present\n        (this.keyreg.voteKey ||\n          this.keyreg.selectionKey ||\n          this.keyreg.stateProofKey ||\n          typeof this.keyreg.voteFirst !== 'undefined' ||\n          typeof this.keyreg.voteLast !== 'undefined' ||\n          typeof this.keyreg.voteKeyDilution !== 'undefined') &&\n        // Then *ALL* participating fields must be present (with an exception for stateProofKey,\n        // which was introduced later so for backwards compatibility we don't require it)\n        !(\n          this.keyreg.voteKey &&\n          this.keyreg.selectionKey &&\n          typeof this.keyreg.voteFirst !== 'undefined' &&\n          typeof this.keyreg.voteLast !== 'undefined' &&\n          typeof this.keyreg.voteKeyDilution !== 'undefined'\n        )\n      ) {\n        throw new Error(\n          `Online key registration missing at least one of the following fields: voteKey, selectionKey, voteFirst, voteLast, voteKeyDilution`\n        );\n      }\n      // The last option is an offline key registration where all the fields\n      // nonParticipation, voteKey, selectionKey, stateProofKey, voteFirst, voteLast, voteKeyDilution\n      // are all undefined\n    }\n\n    if (params.assetConfigParams) {\n      this.assetConfig = {\n        assetIndex: utils.ensureUint64(\n          params.assetConfigParams.assetIndex ?? 0\n        ),\n        total: utils.ensureUint64(params.assetConfigParams.total ?? 0),\n        decimals: utils.ensureSafeUnsignedInteger(\n          params.assetConfigParams.decimals ?? 0\n        ),\n        defaultFrozen: ensureBoolean(\n          params.assetConfigParams.defaultFrozen ?? false\n        ),\n        manager: optionalAddress(params.assetConfigParams.manager),\n        reserve: optionalAddress(params.assetConfigParams.reserve),\n        freeze: optionalAddress(params.assetConfigParams.freeze),\n        clawback: optionalAddress(params.assetConfigParams.clawback),\n        unitName: params.assetConfigParams.unitName,\n        assetName: params.assetConfigParams.assetName,\n        assetURL: params.assetConfigParams.assetURL,\n        assetMetadataHash: optionalFixedLengthByteArray(\n          params.assetConfigParams.assetMetadataHash,\n          ASSET_METADATA_HASH_LENGTH,\n          'assetMetadataHash'\n        ),\n      };\n    }\n\n    if (params.assetTransferParams) {\n      this.assetTransfer = {\n        assetIndex: utils.ensureUint64(params.assetTransferParams.assetIndex),\n        amount: utils.ensureUint64(params.assetTransferParams.amount),\n        assetSender: optionalAddress(params.assetTransferParams.assetSender),\n        receiver: ensureAddress(params.assetTransferParams.receiver),\n        closeRemainderTo: optionalAddress(\n          params.assetTransferParams.closeRemainderTo\n        ),\n      };\n    }\n\n    if (params.assetFreezeParams) {\n      this.assetFreeze = {\n        assetIndex: utils.ensureUint64(params.assetFreezeParams.assetIndex),\n        freezeAccount: ensureAddress(params.assetFreezeParams.freezeTarget),\n        frozen: ensureBoolean(params.assetFreezeParams.frozen),\n      };\n    }\n\n    if (params.appCallParams) {\n      const { onComplete } = params.appCallParams;\n      if (!isOnApplicationComplete(onComplete)) {\n        throw new Error(`Invalid onCompletion value: ${onComplete}`);\n      }\n      this.applicationCall = {\n        appIndex: utils.ensureUint64(params.appCallParams.appIndex),\n        onComplete,\n        numLocalInts: utils.ensureSafeUnsignedInteger(\n          params.appCallParams.numLocalInts ?? 0\n        ),\n        numLocalByteSlices: utils.ensureSafeUnsignedInteger(\n          params.appCallParams.numLocalByteSlices ?? 0\n        ),\n        numGlobalInts: utils.ensureSafeUnsignedInteger(\n          params.appCallParams.numGlobalInts ?? 0\n        ),\n        numGlobalByteSlices: utils.ensureSafeUnsignedInteger(\n          params.appCallParams.numGlobalByteSlices ?? 0\n        ),\n        extraPages: utils.ensureSafeUnsignedInteger(\n          params.appCallParams.extraPages ?? 0\n        ),\n        approvalProgram: ensureUint8Array(\n          params.appCallParams.approvalProgram ?? new Uint8Array()\n        ),\n        clearProgram: ensureUint8Array(\n          params.appCallParams.clearProgram ?? new Uint8Array()\n        ),\n        appArgs: ensureArray(params.appCallParams.appArgs ?? []).map(\n          ensureUint8Array\n        ),\n        accounts: ensureArray(params.appCallParams.accounts ?? []).map(\n          ensureAddress\n        ),\n        foreignApps: ensureArray(params.appCallParams.foreignApps ?? []).map(\n          utils.ensureUint64\n        ),\n        foreignAssets: ensureArray(\n          params.appCallParams.foreignAssets ?? []\n        ).map(utils.ensureUint64),\n        boxes: ensureArray(params.appCallParams.boxes ?? []).map(\n          ensureBoxReference\n        ),\n      };\n    }\n\n    if (params.stateProofParams) {\n      this.stateProof = {\n        stateProofType: utils.ensureSafeUnsignedInteger(\n          params.stateProofParams.stateProofType ?? 0\n        ),\n        stateProof: params.stateProofParams.stateProof,\n        message: params.stateProofParams.message,\n      };\n    }\n\n    if (params.heartbeatParams) {\n      this.heartbeat = new Heartbeat({\n        address: params.heartbeatParams.address,\n        proof: params.heartbeatParams.proof,\n        seed: params.heartbeatParams.seed,\n        voteID: params.heartbeatParams.voteID,\n        keyDilution: params.heartbeatParams.keyDilution,\n      });\n    }\n\n    // Determine fee\n    this.fee = utils.ensureUint64(params.suggestedParams.fee);\n\n    const feeDependsOnSize = !ensureBoolean(\n      params.suggestedParams.flatFee ?? false\n    );\n    if (feeDependsOnSize) {\n      const minFee = utils.ensureUint64(params.suggestedParams.minFee);\n      this.fee *= BigInt(this.estimateSize());\n      // If suggested fee too small and will be rejected, set to min tx fee\n      if (this.fee < minFee) {\n        this.fee = minFee;\n      }\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getEncodingSchema(): encoding.Schema {\n    return Transaction.encodingSchema;\n  }\n\n  toEncodingData(): Map<string, unknown> {\n    const data = new Map<string, unknown>([\n      ['type', this.type],\n      ['fv', this.firstValid],\n      ['lv', this.lastValid],\n      ['snd', this.sender],\n      ['gen', this.genesisID],\n      ['gh', this.genesisHash],\n      ['fee', this.fee],\n      ['note', this.note],\n      ['lx', this.lease],\n      ['rekey', this.rekeyTo],\n      ['grp', this.group],\n    ]);\n\n    if (this.payment) {\n      data.set('amt', this.payment.amount);\n      data.set('rcv', this.payment.receiver);\n      data.set('close', this.payment.closeRemainderTo);\n      return data;\n    }\n\n    if (this.keyreg) {\n      data.set('votekey', this.keyreg.voteKey);\n      data.set('selkey', this.keyreg.selectionKey);\n      data.set('sprfkey', this.keyreg.stateProofKey);\n      data.set('votefst', this.keyreg.voteFirst);\n      data.set('votelst', this.keyreg.voteLast);\n      data.set('votekd', this.keyreg.voteKeyDilution);\n      data.set('nonpart', this.keyreg.nonParticipation);\n      return data;\n    }\n\n    if (this.assetConfig) {\n      data.set('caid', this.assetConfig.assetIndex);\n      const assetParams = new Map<string, unknown>([\n        ['t', this.assetConfig.total],\n        ['dc', this.assetConfig.decimals],\n        ['df', this.assetConfig.defaultFrozen],\n        ['m', this.assetConfig.manager],\n        ['r', this.assetConfig.reserve],\n        ['f', this.assetConfig.freeze],\n        ['c', this.assetConfig.clawback],\n        ['un', this.assetConfig.unitName],\n        ['an', this.assetConfig.assetName],\n        ['au', this.assetConfig.assetURL],\n        ['am', this.assetConfig.assetMetadataHash],\n      ]);\n      data.set('apar', assetParams);\n      return data;\n    }\n\n    if (this.assetTransfer) {\n      data.set('xaid', this.assetTransfer.assetIndex);\n      data.set('aamt', this.assetTransfer.amount);\n      data.set('arcv', this.assetTransfer.receiver);\n      data.set('aclose', this.assetTransfer.closeRemainderTo);\n      data.set('asnd', this.assetTransfer.assetSender);\n      return data;\n    }\n\n    if (this.assetFreeze) {\n      data.set('faid', this.assetFreeze.assetIndex);\n      data.set('afrz', this.assetFreeze.frozen);\n      data.set('fadd', this.assetFreeze.freezeAccount);\n      return data;\n    }\n\n    if (this.applicationCall) {\n      data.set('apid', this.applicationCall.appIndex);\n      data.set('apan', this.applicationCall.onComplete);\n      data.set('apaa', this.applicationCall.appArgs);\n      data.set('apat', this.applicationCall.accounts);\n      data.set('apas', this.applicationCall.foreignAssets);\n      data.set('apfa', this.applicationCall.foreignApps);\n      data.set(\n        'apbx',\n        boxReferencesToEncodingData(\n          this.applicationCall.boxes,\n          this.applicationCall.foreignApps,\n          this.applicationCall.appIndex\n        )\n      );\n      data.set('apap', this.applicationCall.approvalProgram);\n      data.set('apsu', this.applicationCall.clearProgram);\n      data.set(\n        'apls',\n        new Map<string, number>([\n          ['nui', this.applicationCall.numLocalInts],\n          ['nbs', this.applicationCall.numLocalByteSlices],\n        ])\n      );\n      data.set(\n        'apgs',\n        new Map<string, number>([\n          ['nui', this.applicationCall.numGlobalInts],\n          ['nbs', this.applicationCall.numGlobalByteSlices],\n        ])\n      );\n      data.set('apep', this.applicationCall.extraPages);\n      return data;\n    }\n\n    if (this.stateProof) {\n      data.set('sptype', this.stateProof.stateProofType);\n      data.set(\n        'sp',\n        this.stateProof.stateProof\n          ? this.stateProof.stateProof.toEncodingData()\n          : undefined\n      );\n      data.set(\n        'spmsg',\n        this.stateProof.message\n          ? this.stateProof.message.toEncodingData()\n          : undefined\n      );\n      return data;\n    }\n\n    if (this.heartbeat) {\n      const heartbeat = new Heartbeat({\n        address: this.heartbeat.address,\n        proof: this.heartbeat.proof,\n        seed: this.heartbeat.seed,\n        voteID: this.heartbeat.voteID,\n        keyDilution: this.heartbeat.keyDilution,\n      });\n      data.set('hb', heartbeat.toEncodingData());\n      return data;\n    }\n\n    throw new Error(`Unexpected transaction type: ${this.type}`);\n  }\n\n  static fromEncodingData(data: unknown): Transaction {\n    if (!(data instanceof Map)) {\n      throw new Error(`Invalid decoded logic sig account: ${data}`);\n    }\n    const suggestedParams: SuggestedParams = {\n      minFee: BigInt(0),\n      flatFee: true,\n      fee: data.get('fee') ?? 0,\n      firstValid: data.get('fv') ?? 0,\n      lastValid: data.get('lv') ?? 0,\n      genesisHash: data.get('gh'),\n      genesisID: data.get('gen'),\n    };\n\n    const txnType = data.get('type');\n    if (!isTransactionType(txnType)) {\n      throw new Error(`Unrecognized transaction type: ${txnType}`);\n    }\n\n    const params: TransactionParams = {\n      type: txnType,\n      sender: data.get('snd') ?? Address.zeroAddress(),\n      note: data.get('note'),\n      lease: data.get('lx'),\n      suggestedParams,\n    };\n\n    if (data.get('rekey')) {\n      params.rekeyTo = data.get('rekey');\n    }\n\n    if (params.type === TransactionType.pay) {\n      const paymentParams: PaymentTransactionParams = {\n        amount: data.get('amt') ?? 0,\n        receiver: data.get('rcv') ?? Address.zeroAddress(),\n      };\n      if (data.get('close')) {\n        paymentParams.closeRemainderTo = data.get('close');\n      }\n      params.paymentParams = paymentParams;\n    } else if (params.type === TransactionType.keyreg) {\n      const keyregParams: KeyRegistrationTransactionParams = {\n        voteKey: data.get('votekey'),\n        selectionKey: data.get('selkey'),\n        stateProofKey: data.get('sprfkey'),\n        voteFirst: data.get('votefst'),\n        voteLast: data.get('votelst'),\n        voteKeyDilution: data.get('votekd'),\n        nonParticipation: data.get('nonpart'),\n      };\n      params.keyregParams = keyregParams;\n    } else if (params.type === TransactionType.acfg) {\n      const assetConfigParams: AssetConfigurationTransactionParams = {\n        assetIndex: data.get('caid'),\n      };\n      if (data.get('apar')) {\n        const assetParams = data.get('apar') as Map<string, any>;\n        assetConfigParams.total = assetParams.get('t');\n        assetConfigParams.decimals = assetParams.get('dc');\n        assetConfigParams.defaultFrozen = assetParams.get('df');\n        assetConfigParams.unitName = assetParams.get('un');\n        assetConfigParams.assetName = assetParams.get('an');\n        assetConfigParams.assetURL = assetParams.get('au');\n        assetConfigParams.assetMetadataHash = assetParams.get('am');\n        if (assetParams.get('m')) {\n          assetConfigParams.manager = assetParams.get('m');\n        }\n        if (assetParams.get('r')) {\n          assetConfigParams.reserve = assetParams.get('r');\n        }\n        if (assetParams.get('f')) {\n          assetConfigParams.freeze = assetParams.get('f');\n        }\n        if (assetParams.get('c')) {\n          assetConfigParams.clawback = assetParams.get('c');\n        }\n      }\n      params.assetConfigParams = assetConfigParams;\n    } else if (params.type === TransactionType.axfer) {\n      const assetTransferParams: AssetTransferTransactionParams = {\n        assetIndex: data.get('xaid') ?? 0,\n        amount: data.get('aamt') ?? 0,\n        receiver: data.get('arcv') ?? Address.zeroAddress(),\n      };\n      if (data.get('aclose')) {\n        assetTransferParams.closeRemainderTo = data.get('aclose');\n      }\n      if (data.get('asnd')) {\n        assetTransferParams.assetSender = data.get('asnd');\n      }\n      params.assetTransferParams = assetTransferParams;\n    } else if (params.type === TransactionType.afrz) {\n      const assetFreezeParams: AssetFreezeTransactionParams = {\n        assetIndex: data.get('faid') ?? 0,\n        freezeTarget: data.get('fadd') ?? Address.zeroAddress(),\n        frozen: data.get('afrz') ?? false,\n      };\n      params.assetFreezeParams = assetFreezeParams;\n    } else if (params.type === TransactionType.appl) {\n      const appCallParams: ApplicationCallTransactionParams = {\n        appIndex: data.get('apid') ?? 0,\n        onComplete: utils.ensureSafeUnsignedInteger(data.get('apan') ?? 0),\n        appArgs: data.get('apaa'),\n        accounts: data.get('apat'),\n        foreignAssets: data.get('apas'),\n        foreignApps: data.get('apfa'),\n        approvalProgram: data.get('apap'),\n        clearProgram: data.get('apsu'),\n        extraPages: data.get('apep'),\n      };\n      const localSchema = data.get('apls') as Map<string, number> | undefined;\n      if (localSchema) {\n        appCallParams.numLocalInts = localSchema.get('nui');\n        appCallParams.numLocalByteSlices = localSchema.get('nbs');\n      }\n      const globalSchema = data.get('apgs') as Map<string, number> | undefined;\n      if (globalSchema) {\n        appCallParams.numGlobalInts = globalSchema.get('nui');\n        appCallParams.numGlobalByteSlices = globalSchema.get('nbs');\n      }\n      const boxes = data.get('apbx') as Array<Map<string, unknown>> | undefined;\n      if (boxes) {\n        appCallParams.boxes = boxes.map((box) => {\n          const index = utils.ensureSafeUnsignedInteger(box.get('i') ?? 0);\n          const name = ensureUint8Array(box.get('n') ?? new Uint8Array());\n          if (index === 0) {\n            // We return 0 for the app ID so that it's guaranteed translateBoxReferences will\n            // translate the app index back to 0. If we instead returned the called app ID,\n            // translateBoxReferences would translate the app index to a nonzero value if the called\n            // app is also in the foreign app array.\n            return {\n              appIndex: 0,\n              name,\n            };\n          }\n          if (\n            !appCallParams.foreignApps ||\n            index > appCallParams.foreignApps.length\n          ) {\n            throw new Error(\n              `Cannot find foreign app index ${index} in ${appCallParams.foreignApps}`\n            );\n          }\n          return {\n            appIndex: appCallParams.foreignApps[index - 1],\n            name,\n          };\n        });\n      }\n      params.appCallParams = appCallParams;\n    } else if (params.type === TransactionType.stpf) {\n      const stateProofParams: StateProofTransactionParams = {\n        stateProofType: data.get('sptype'),\n        stateProof: data.get('sp')\n          ? StateProof.fromEncodingData(data.get('sp'))\n          : undefined,\n        message: data.get('spmsg')\n          ? StateProofMessage.fromEncodingData(data.get('spmsg'))\n          : undefined,\n      };\n      params.stateProofParams = stateProofParams;\n    } else if (params.type === TransactionType.hb) {\n      const heartbeat = Heartbeat.fromEncodingData(data.get('hb'));\n      const heartbeatParams: HeartbeatTransactionParams = {\n        address: heartbeat.address,\n        proof: heartbeat.proof,\n        seed: heartbeat.seed,\n        voteID: heartbeat.voteID,\n        keyDilution: heartbeat.keyDilution,\n      };\n      params.heartbeatParams = heartbeatParams;\n    } else {\n      const exhaustiveCheck: never = params.type;\n      throw new Error(`Unexpected transaction type: ${exhaustiveCheck}`);\n    }\n\n    const txn = new Transaction(params);\n\n    if (data.get('grp')) {\n      const group = ensureUint8Array(data.get('grp'));\n      if (group.byteLength !== ALGORAND_TRANSACTION_GROUP_LENGTH) {\n        throw new Error(`Invalid group length: ${group.byteLength}`);\n      }\n      txn.group = group;\n    }\n\n    return txn;\n  }\n\n  private estimateSize() {\n    return this.toByte().length + NUM_ADDL_BYTES_AFTER_SIGNING;\n  }\n\n  bytesToSign() {\n    const encodedMsg = this.toByte();\n    return utils.concatArrays(TX_TAG, encodedMsg);\n  }\n\n  toByte() {\n    return encoding.encodeMsgpack(this);\n  }\n\n  // returns the raw signature\n  rawSignTxn(sk: Uint8Array): Uint8Array {\n    const toBeSigned = this.bytesToSign();\n    const sig = nacl.sign(toBeSigned, sk);\n    return sig;\n  }\n\n  signTxn(sk: Uint8Array): Uint8Array {\n    // TODO: deprecate in favor of SignedTransaction class\n    const keypair = nacl.keyPairFromSecretKey(sk);\n    const signerAddr = new Address(keypair.publicKey);\n    const sig = this.rawSignTxn(sk);\n    return this.attachSignature(signerAddr, sig);\n  }\n\n  attachSignature(\n    signerAddr: string | Address,\n    signature: Uint8Array\n  ): Uint8Array {\n    // TODO: deprecate in favor of SignedTransaction class\n    if (!nacl.isValidSignatureLength(signature.length)) {\n      throw new Error('Invalid signature length');\n    }\n    const sTxn = new Map<string, unknown>([\n      ['sig', signature],\n      ['txn', this.toEncodingData()],\n    ]);\n    const signerAddrObj = ensureAddress(signerAddr);\n    // add AuthAddr if signing with a different key than From indicates\n    if (!this.sender.equals(signerAddrObj)) {\n      sTxn.set('sgnr', signerAddrObj);\n    }\n\n    // This is a hack to avoid a circular reference with the SignedTransaction class\n    const stxnSchema = new NamedMapSchema(\n      allOmitEmpty([\n        {\n          key: 'txn',\n          valueSchema: Transaction.encodingSchema,\n        },\n        {\n          key: 'sig',\n          valueSchema: new FixedLengthByteArraySchema(64),\n        },\n        {\n          key: 'sgnr',\n          valueSchema: new OptionalSchema(new AddressSchema()),\n        },\n      ])\n    );\n\n    return encoding.msgpackRawEncode(stxnSchema.prepareMsgpack(sTxn));\n  }\n\n  rawTxID(): Uint8Array {\n    const enMsg = this.toByte();\n    const gh = utils.concatArrays(TX_TAG, enMsg);\n    return Uint8Array.from(nacl.genericHash(gh));\n  }\n\n  txID(): string {\n    const hash = this.rawTxID();\n    return base32.encode(hash).slice(0, ALGORAND_TRANSACTION_LENGTH);\n  }\n}\n\n/**\n * encodeUnsignedTransaction takes a completed txnBuilder.Transaction object, such as from the makeFoo\n * family of transactions, and converts it to a Buffer\n * @param transactionObject - the completed Transaction object\n */\nexport function encodeUnsignedTransaction(\n  transactionObject: Transaction\n): Uint8Array {\n  return encoding.encodeMsgpack(transactionObject);\n}\n\n/**\n * decodeUnsignedTransaction takes a Uint8Array (as if from encodeUnsignedTransaction) and converts it to a txnBuilder.Transaction object\n * @param transactionBuffer - the Uint8Array containing a transaction\n */\nexport function decodeUnsignedTransaction(\n  transactionBuffer: ArrayLike<number>\n): Transaction {\n  return encoding.decodeMsgpack(transactionBuffer, Transaction);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}